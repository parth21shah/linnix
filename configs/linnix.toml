# Linnix Configuration
# Documentation: https://docs.linnix.io/configuration

[api]
listen_addr = "127.0.0.1:3000"
# auth_token = "your-secret-token"

[runtime]
offline = false

[telemetry]
# Sample interval for CPU/memory metrics (milliseconds)
sample_interval_ms = 1000

# Event retention window (seconds)
retention_seconds = 60

[reasoner]
# AI-powered incident detection
enabled = true
endpoint = "http://localhost:8090/v1/chat/completions"
model = "linnix-3b-distilled"
window_seconds = 10
timeout_ms = 30000
min_eps_to_enable = 10  # Enable for testing

[prometheus]
# Prometheus metrics endpoint
enabled = true

# ─────────────────────────────────────────────────────────────────────────────
# Notifications via Apprise (optional)
# ─────────────────────────────────────────────────────────────────────────────
# Apprise supports 100+ services: Slack, Discord, Teams, Telegram, SMS, Email, etc.
# See https://github.com/caronc/apprise#supported-notifications for URL formats
#
# [notifications.apprise]
# urls = [
#     "slack://xoxb-YOUR-BOT-TOKEN/C0123456789",
#     "discord://WEBHOOK_ID/WEBHOOK_TOKEN",
#     "mailto://user:pass@smtp.gmail.com"
# ]
# min_severity = "medium"  # Options: info, low, medium, high (default: info)

[psi]
# Duration in seconds of sustained pressure required to trigger attribution
sustained_pressure_seconds = 15

# ─────────────────────────────────────────────────────────────────────────────
# Docker Container Enforcement (Circuit Breaker)
# ─────────────────────────────────────────────────────────────────────────────
# Automatically pause/stop/kill containers when rule violations are detected.
# IMPORTANT: Set enabled=true to activate enforcement.
#
# [docker_enforcement]
# enabled = true
# target_container = "my-victim-container"
# default_action = "pause"  # Options: pause, stop, kill, restart
# trigger_patterns = ["fork_storm", "oom_risk", "cpu_spin"]
# grace_period_secs = 5
# cooldown_secs = 60
# max_actions_per_hour = 10
#
# # Override actions per rule (optional)
# [docker_enforcement.rule_actions]
# fork_storm = "pause"
# oom_risk = "kill"
# cpu_spin = "pause"

